@{
    Layout = "~/Views/_ana.cshtml";
}
@using UniStaj
@using UniStaj.veri;
@model UniStaj.Models.MenuDuzenlemeModel


<form id="formKayit" name="formKayit" autocomplete="off">
@{ 
        <div class="table-responsive">
                                            <table class="table table-striped mb-0">
        
                                                <thead>
                                                    <tr> 
                                                    <th>Kimlik</th>
                                                        <th> Modül  </th>
                    <th> Sayfa Adı</th>
                    <th> Sırası </th> 
                </tr>
                                                </thead>
                                                <tbody>
                @{
                    for(int i=0; i<Model.menuler.Count; i++)
                    {
                        BysMenuAYRINTI siradaki = Model.menuler[i];
                        @Html.HiddenFor(model => model.menuler[i].bysMenuKimlik)

                        <tr>
                        <td>
                        @siradaki.bysMenuKimlik
                        </td>
                            <td> 
                                @{
                                    if(siradaki.e_modulSayfasimi == true )
                                    {
                                        <strong>
                                        @siradaki.bysMenuAdi
                                        </strong>
                                    }
                                    else
                                    {
                                        @siradaki.bysMenuAdi
                                    }
                                }
                        
                            </td>
                            <td> @siradaki.bysMenuUrl  </td>
                            <td>
                                @Html.TextBoxFor(m => m.menuler[i].sirasi, new { @class = @Ayar.textBoxBicim(), maxlength = "100", placeholder = @Ayar.sozcuk("Adı", 1) })

                            </td> 

                        </tr>
          
        
    } 
    }
            </tbody>
            </table>
            </div>
            }
            </form>
            <br />
<button type="button" onclick="ekle(); return false;" id="btnKaydet" class="btn btn-success" data-bs-toggle="modal">
    @Ayar.sozcuk("Kaydet", 1)
</button>
<form id="formKayit" name="formKayit" autocomplete="off">
  

</form>

<script>
    function ekle() {

        var valdata = $("#formKayit").serialize();
        console.table(valdata);
        $.ajax({
            url: "/MenuDuzenleme/kaydet/",
            type: "Post",
            data: valdata,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            dataType: "json",
            success: function (response) {
                if (!response.success) {
                    Swal.fire(
                        '@Ayar.sozcuk("Hata", 1)',
                        response.message,
                        'error'
                    );
                    return false;
                }
                else {
                    Swal.fire(
                        '@Ayar.sozcuk("Başarılı", 1)',
                        response.message,
                        'success'
                    ).then(function () {
                        var deger = "True";
                        if (deger == "True") {
                            window.location.reload();
                        }
                    })
                }
            }
        });
    }

</script>

