@{ Layout = "~/Views/_ana.cshtml"; }
@using UniStaj.veri;
@using UniStaj;
@model UniStaj.Models.WebSayfasiModel
<script src="~/assets/js/jquery.dataTables.min.js"></script>
<form id="formKayit" name="formKayit" autocomplete="off">
    @{ bool eklemeIzniVarmi = (bool)ViewBag.eklemeIznivar;
        bool silmeIzniVarmi = (bool)ViewBag.silmeIznivar;
        <i style="float: left; width: 50%; color: white; ">
            @if (eklemeIzniVarmi)
            {
                <button type="button" class="btn btn-success btn-rounded waves-effect waves-light " onclick="kartAc(0);return false;">
                    <i class="mdi mdi-plus me-1"></i>
                    Yeni Web Sayfası Ekle
                </button> }
            else
            {
                string y = "ekleme izniniz yok";
                @y}
        </i>
        <i style="float: right; width: 50%; text-align: right; color: white; ">
            @if (silmeIzniVarmi)
            {
                <button type="button" class="btn btn-danger btn-rounded waves-effect waves-light" onclick="sil(); return fals;">
                    <i class="mdi mdi-minus me-1"></i>
                    Seçilen Kayıtları Sil
                </button> }
            else
            {
                string y = "silme izniniz yok";
                @y}
        </i>
        <div style="float: left; width: 100%; height:30px;  "></div>
         <table id="@Ayar.tabloId" class="@Ayar.tabloClass" style="@Ayar.tabloStyle">
            <thead>
                <tr>
                    <th> </th>
                    <th>Ham Adresi</th>
                    <th>Sayfa Başlığı</th>
                    <th>Modül</th>
                    <th>Sayfa Türü</th>  
                    <th>
                        Güncelle
                    </th>
                </tr>
            </thead>
            <tbody>
                @{ List<WebSayfasiAYRINTI> veri = Model.dokumVerisi;
                    foreach (var satir in veri)
                    {
                        <tr row_id="@satir._birincilAnahtar().ToString()">
                            <td>
                                <input type="checkbox" class="checkBox"
                                       value="@satir._birincilAnahtar()" />
                            </td>
                            <td>@satir.hamAdresi</td>
                            <td>@satir.sayfaBasligi</td>
                            <td>@satir.modulAdi</td>
                            <td>@satir.sayfaTuru</td> 


                         
                            <td>
                                <a class="@Ayar.btnGridGuncelle" onclick="kartAc(@satir._birincilAnahtar()); return false;" style="color: #ffffff !important; background-color: #ffae00; border-color: #ffae00; " title="Edit">
                                    <i class="fas fa-pencil-alt"></i>
                                </a>
                            </td>
                        </tr>
 } }
            </tbody>
        </table> }
</form>
<script>
    function kartAc(id) {
        window.location.href = "/WebSayfasi/Kart/" + id;
    }
    function sil() {
        var selectedIDs = new Array();
        $('input:checkbox.checkBox').each(function () {
            if ($(this).prop('checked')) {
                selectedIDs.push($(this).val());
            }
        });
        if (selectedIDs.length == 0) {
            alert('Lütfen silmek istediğiniz kayıtları seçiniz ')
            return;
        }
        var options = {};
        options.url = "/WebSayfasi/Sil?id=" + selectedIDs;
        options.type = "POST";
        options.data = JSON.stringify(selectedIDs);
        options.contentType = "application/json";
        options.dataType = "json";
        options.success = function (msg) {
            Swal.fire({
                position: "center-center", icon: "success",
                title: "Silme İşlemi Başarılı", showConfirmButton: !1, timer: 1750,
            });
            setTimeout(function () {
                window.location.reload(1);
            }, 1750);  //
        };
        options.error = function () {
            Swal.fire(
                'Hata',
                msg,
                'error'
            );
        };
        $.ajax(options);
        return false;
    }
</script>

